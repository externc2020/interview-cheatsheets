# 数据库（DBMS）

- 提供更可靠的存储，更快的读写

### 常见类型
- 关系型：MySQL
- 键值型：Redis, LevelDB, Cassandra, HBase, RocksDB, ScyllaDB
- 时序型：InfluxDB，Prometheus
- 文档型：MongoDB，ElasticSearch
- 图型（Graph）：Neo4j

### 事务四大特性
- 原子性（Atomicity）
- 一致性（Consistency）
- 隔离性（Isolation）
- 持久性（Durability）

### 并发事务带来的问题
- 脏读（读到为提交的数据）
- 幻读（提交前插入新数据）
- 丢失修改（提交前被篡改）
- 不可重复读（提交前被篡改）

### 隔离级别
- 未提交读（Read uncommitted）可能脏读，可能幻读
- 已提交读（Read committed）mvcc 不可能 可能
- 可重复读（Repeatable read）mvcc 不可能 可能
- 可串行化（Serializable）不可能 不可能

### Redis 持久化
- rdb(Redis DataBase) 
- aof(Append Only File)
- string list set hash zset
- rdb 内存快照
- aof 增量，修改，commitlog
- multi exec discard watch

### ORM 
- n+1 问题
- 二级缓存

### 时序数据库 TSDB (貌似也是 LSM-tree)
- B+ tree 为基础的关系型数据库
- LSM-tree 为基础的 kv nosql 数据库 leveldb, cassandra, hbase, rocksdb, scylladb
- LSM是(Log Structured Merge的简称)在分布式存储系统中通常会被设计成append-only的系统，LSM系统主要是顺序写优化，例如commit log等等，并作为分布式系统底层的基石。
- 2006 年Google Bigtable 论文之后，论文中提到 Bigtable 使用的数据结构就是 LSM-Tree
- Skiplist是一个随机型的数据结构(probabilistic data structure)提供了在顺序数据上的快速查询。

### MySQL connection URL
rewriteBatchedStatements参数
设置此参数为true, 会让数据库driver重写批量更新语句(批量插入和批量更新)
否则批量更新会退化成one-by-one执行
