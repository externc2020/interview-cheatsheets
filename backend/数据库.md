隔离级别
脏读（Dirty Read）
幻读（Phantom Read）幻读是指，在一个事务中，第一次查询某条记录，发现没有，但是，当试图更新这条不存在的记录时，竟然能成功，并且，再次读取同一条记录，它就神奇地出现了。

未提交读（Read uncommitted）
可能            
可能
已提交读（Read committed）mvcc
不可能	            
可能
可重复读（Repeatable read）mvcc
不可能	            
可能
可串行化（Serializable ）	    
不可能	             
不可能

MVCC 可以保证不阻塞地读到一致的数据。但是，MVCC 并没有对实现细节做约束，为此不同的数据库的语义有所不同

tx id  roll pointer

回滚日志


redis 持久化 rdb(Redis DataBase) aof(Append Only File)
string list set hash zset
rdb 内存快照
aof 增量，修改，commitlog

multi exec discard watch

原子性（Atomicity）
一致性（Consistency）
隔离性（Isolation）
持久性（Durability）


spring tx propagation
REQUIRED      
如果当前没有事务，则自己新建一个事务，如果当前存在事务，则加入这个事务

SUPPORTS      
当前存在事务，则加入当前事务，如果当前没有事务，就以非事务方法执行

MANDATORY     
当前存在事务，则加入当前事务，如果当前事务不存在，则抛出异常

REQUIRES_NEW  
创建一个新事务，如果存在当前事务，则挂起该事务

NOT_SUPPORTED 
始终以非事务方式执行,如果当前存在事务，则挂起当前事务

NEVER         
不使用事务，如果当前事务存在，则抛出异常

NESTED        
如果当前事务存在，则在嵌套事务中执行，否则REQUIRED的操作一样（开启一个事务）



ORM => n+1


tsdb promethues influxdb

B+ tree 为基础的关系型数据库
LSM-tree 为基础的 kv nosql 数据库 leveldb, cassandra, hbase, rocksdb, scylladb
LSM是(Log Structured Merge的简称)在分布式存储系统中通常会被设计成append-only的系统，LSM系统主要是顺序写优化，例如commit log等等，并作为分布式系统底层的基石。
2006 年Google Bigtable 论文之后，论文中提到 Bigtable 使用的数据结构就是 LSM-Tree

Skiplist是一个随机型的数据结构(probabilistic data structure)提供了在顺序数据上的快速查询。


rewriteBatchedStatements参数
设置此参数为true, 会让数据库driver重写批量更新语句(批量插入和批量更新)
否则批量更新会退化成one-by-one执行






