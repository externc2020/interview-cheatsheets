# 系统架构 - 高性能

##  理论

- 并行计算 Amdahl 定律：为了提高性能，不能只增加 CPU 数量（后期收效甚微），还要增加系统的并行度（高并发）


## CPU（缓存）+ 内存

- 缓存行（Cache Line）伪共享
- 大页
- 并行计算 OpenMP
- SMP（Symmetric Multi-Processor）对称多处理器结构，指服务器中多个CPU对称工作，每个CPU访问内存地址所需时间相同。其主要特征是共享，包含对CPU，内存，I/O等进行共享。SMP的优点是能够保证内存一致性，缺点是这些共享的资源很可能成为性能瓶颈，随着CPU数量的增加，每个CPU都要访问相同的内存资源，可能导致内存访问冲突，可能会导致CPU资源的浪费。常用的PC机就属于这种。
- NUMA（Non-Uniform Memory Access）非统一内存访问架构，非一致存储访问，将CPU分为CPU模块，每个CPU模块由多个CPU组成，并且具有独立的本地内存、I/O槽口等，模块之间可以通过互联模块相互访问，访问本地内存的速度将远远高于访问远地内存(系统内其它节点的内存)的速度，这也是非一致存储访问NUMA的由来。NUMA优点是可以较好地解决原来SMP系统的扩展问题，缺点是由于访问远地内存的延时远远超过本地内存，因此当CPU数量增加时，系统性能无法线性增加。
- SIMD（Single Instruction，Multiple Data）SSE，AVX

SSE 优化 HashMap

## 磁盘 IO

- Page Cache
- SSD
- 顺序写

## 网络 IO

### 非阻塞 IO

## Unikernel

- 自定义内核，打包应用程序进入内核，突破内核态用户态，榨干硬件性能，anykernel 概念
- 一种实现 NetBSD rump kernel

## JVM
- vert.x
- GraalVM
- QUARKUS
