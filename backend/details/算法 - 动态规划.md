# 动态规划（DP = Dynamic Programming)

- 最优子结构：最优解的子结构也是最优
- 后无效性：子结构最优解不受后面的决策影响
- 子问题重叠性 -> 记忆化存储
- 类似递推
- 核心：状态转移方程

### 背包系列

#### 01 背包

【问题描述】<br/>
$N$ 件物品，消耗 $C_i$ 价值 $W_i$，背包容量 $V$。求将哪些物品装入背包价值总和最大。

【解题思路】<br/>
$f(i,v)$ 前 i 件物品放入容量 v 的背包获得的最大价值。它和 i-1 问题的关系就是第 i 件物品**放**或**不放**

$$f(i,v)=\max\{f(i-1,v),f(i-1,v-C_i)+W_i\}$$

- 时间复杂度 $O(VN)$，空间复杂度 $O(VN)$
- 若不要求放满，则 $f(0,j)=0 \mid 0 \leq j \leq V$
- 若要求放满，则 $\begin{cases}f(0,0)=0\\f(0,j)=-\infty & 1 \leq j \leq V\end{cases}$ 
- 可优化空间复杂度到 $O(V)$ 即把状态数组优化到一维，第二层循环从大到小
- 内层循环常数优化：起点 $\max\{C_i, V-\sum_{j=i}^{N}C_j\}$

#### 完全背包

【问题描述】<br/>
N 种物品，每种数量不限

【解题思路】<br/>

$$f(i,v)=\max\{f(i-1,v-kC_i)+kW_i \mid 0 \leq kC_i \leq v\}$$

- 时间复杂度 $O(VNX)$
- 优化：剔除废物 i ($C_i \geq C_j \land W_i \leq W_j$)
- 优化：二进制拆分
- 优化：$O(VN)$ 时间复杂度，第二层循环从小到大

#### 多重背包

【问题描述】<br/>
每种物品数量上限 $M_i$

【解题思路】<br/>

$$f(i,v)=\max\{f(i-1,v-kC_i)+kW_i\mid 0 \leq k \leq M_i\}$$


#### 混合背包

【问题描述】<br/>
有的物品只能01，有的物品数量无限，有的物品数量有限

#### 二维费用

【问题描述】<br/>
物品多一维费用 $C'_i$ 和总容量 $V'_i$

【解题思路】<br/>

$$f(i,v,v')=\max\{f(i-1,v,v'), f(i-1,v-C_i,v'-C'_i)+W_i\}$$

- 隐含第二维费用：例如可选物品总数
- 将二维费用看作复整数

#### 分组背包

【问题描述】<br/>
每组物品只能选一件，有 k 组

【解题思路】<br/>

$$f(k,v) = \max\{f(k-1,v), f(k-1,v-C_i)+W_i \mid \text{item}\;i \in \text{group}\;k \}$$

#### 变形

- 泛化物品


### 股票系列

### 变种：树形 DP

### 优化：记忆化

### 优化：状态压缩

### 优化：单调队列

### 优化：斜率

